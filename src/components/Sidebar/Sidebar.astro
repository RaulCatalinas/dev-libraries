---
import Header from '../Header/Header.astro';
import SidebarItems from './SidebarItems.astro';
import { MENU_SIDEBAR } from '@constants/sidebar';
---

<div class="antialiased bg-gray-50 dark:bg-gray-900">
  <Header />

  <!-- Sidebar -->
  <aside
    class="fixed top-0 left-0 z-40 w-96 h-screen pt-14 transition-transform -translate-x-full bg-white border-r border-gray-200 md:translate-x-0 dark:bg-red-800 dark:border-gray-700"
    aria-label="Sidenav"
    id="drawer-navigation"
  >
    <div class="overflow-y-auto py-8 px-8 h-full bg-white dark:bg-gray-800">
      <ul class="side-bar-ul-top space-y-2">
        <SidebarItems sidebarItems={MENU_SIDEBAR} />
      </ul>
      <div class="absolute bottom-0 left-0 w-96 p-8">
        <ul
          class="side-bar-ul-bottom pt-5 mt-5 space-y-2 border-t border-gray-200 dark:border-gray-700"
        >
          <li>
            <a
              href="/contributors"
              class="flex items-center p-3 text-base font-medium text-gray-900 rounded-lg transition duration-100 dark:text-white hover:bg-[#E5f99d] dark:hover:bg-[#BAE635] dark:hover:text-gray-800 group"
            >
              <svg
                class="size-6"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                fill="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  fill-rule="evenodd"
                  d="M12 6a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7Zm-1.5 8a4 4 0 0 0-4 4 2 2 0 0 0 2 2h7a2 2 0 0 0 2-2 4 4 0 0 0-4-4h-3Zm6.82-3.096a5.51 5.51 0 0 0-2.797-6.293 3.5 3.5 0 1 1 2.796 6.292ZM19.5 18h.5a2 2 0 0 0 2-2 4 4 0 0 0-4-4h-1.1a5.503 5.503 0 0 1-.471.762A5.998 5.998 0 0 1 19.5 18ZM4 7.5a3.5 3.5 0 0 1 5.477-2.889 5.5 5.5 0 0 0-2.796 6.293A3.501 3.501 0 0 1 4 7.5ZM7.1 12H6a4 4 0 0 0-4 4 2 2 0 0 0 2 2h.5a5.998 5.998 0 0 1 3.071-5.238A5.505 5.505 0 0 1 7.1 12Z"
                  clip-rule="evenodd"></path>
              </svg>
              <span class="ml-3">Contributors</span>
            </a>
          </li>
          <li>
            <a
              href="/about"
              class="flex items-center p-3 text-base font-medium text-gray-900 rounded-lg transition duration-100 dark:text-white hover:bg-[#E5f99d] dark:hover:bg-[#BAE635] dark:hover:text-gray-800 group"
            >
              <svg
                class="size-6"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                fill="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  fill-rule="evenodd"
                  d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm9.008-3.018a1.502 1.502 0 0 1 2.522 1.159v.024a1.44 1.44 0 0 1-1.493 1.418 1 1 0 0 0-1.037.999V14a1 1 0 1 0 2 0v-.539a3.44 3.44 0 0 0 2.529-3.256 3.502 3.502 0 0 0-7-.255 1 1 0 0 0 2 .076c.014-.398.187-.774.48-1.044Zm.982 7.026a1 1 0 1 0 0 2H12a1 1 0 1 0 0-2h-.01Z"
                  clip-rule="evenodd"></path>
              </svg>
              <span class="ml-3">About</span>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </aside>

  <main class="relative lg:px-12 md:px-8 sm:px-6 px-4 lg:pt-28 md:pt-14 sm:pt-7 pt-20 md:ml-96">
    <!-- <main class="p-4 md:ml-64 h-auto pt-20"> -->
    <slot />
  </main>
</div>

<!--Set active class on nav when the page is active -->
<script>
  const nav1 = document.querySelector('.side-bar-ul-top');
  const navLinks1 = nav1?.querySelectorAll('a');
  const currentURL1 = window.location.href;
  navLinks1?.forEach((link) => {
    if (link?.href === currentURL1) {
      link.classList.add('active');
    }
  });

  const nav2 = document.querySelector('.side-bar-ul-bottom');
  const navLinks2 = nav2?.querySelectorAll('a');
  const currentURL2 = window.location.href;
  navLinks2?.forEach((link) => {
    if (link.href === currentURL2) {
      link.classList.add('active');
    }
  });
</script>

<style>
  .side-bar-ul-top a.active {
    background: #9ccc16;
    /* --tw-text-opacity: 1; */
    /* color: rgb(17 24 39 / var(--tw-text-opacity)); */
    color: #1f1f29;
  }

  .side-bar-ul-bottom a.active {
    background: #9ccc16;
    /* --tw-text-opacity: 1; */
    /* color: rgb(17 24 39 / var(--tw-text-opacity)); */
    color: #1f1f29;
  }
</style>
